"use strict";(self.webpackChunkresearch=self.webpackChunkresearch||[]).push([[639],{5680:(e,t,o)=>{o.d(t,{xA:()=>c,yg:()=>g});var a=o(6540);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,a)}return o}function i(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?n(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,a,r=function(e,t){if(null==e)return{};var o,a,r={},n=Object.keys(e);for(a=0;a<n.length;a++)o=n[a],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)o=n[a],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var l=a.createContext({}),h=function(e){var t=a.useContext(l),o=t;return e&&(o="function"==typeof e?e(t):i(i({},t),e)),o},c=function(e){var t=h(e.components);return a.createElement(l.Provider,{value:t},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var o=e.components,r=e.mdxType,n=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=h(o),u=r,g=d["".concat(l,".").concat(u)]||d[u]||p[u]||n;return o?a.createElement(g,i(i({ref:t},c),{},{components:o})):a.createElement(g,i({ref:t},c))}));function g(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var n=o.length,i=new Array(n);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:r,i[1]=s;for(var h=2;h<n;h++)i[h]=o[h];return a.createElement.apply(null,i)}return a.createElement.apply(null,o)}u.displayName="MDXCreateElement"},7618:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>n,metadata:()=>s,toc:()=>h});var a=o(8168),r=(o(6540),o(5680));const n={title:"Overview of NPoS"},i=void 0,s={unversionedId:"Polkadot/protocols/NPoS/Overview",id:"Polkadot/protocols/NPoS/Overview",title:"Overview of NPoS",description:"Authors: Alfonso Cevallos",source:"@site/docs/Polkadot/protocols/NPoS/1. Overview.md",sourceDirName:"Polkadot/protocols/NPoS",slug:"/Polkadot/protocols/NPoS/Overview",permalink:"/Polkadot/protocols/NPoS/Overview",draft:!1,editUrl:"https://github.com/w3f/research/blob/master/docs/Polkadot/protocols/NPoS/1. Overview.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{title:"Overview of NPoS"},sidebar:"sidebar",previous:{title:"Nominated Proof-of-Stake",permalink:"/Polkadot/protocols/NPoS/"},next:{title:"A verifiably secure and proportional committee election rule",permalink:"/Polkadot/protocols/NPoS/Paper"}},l={},h=[{value:"Validators and nominators",id:"validators-and-nominators",level:2},{value:"The NPoS scheme",id:"the-npos-scheme",level:2},{value:"The election process",id:"the-election-process",level:2}],c={toc:h},d="wrapper";function p(e){let{components:t,...n}=e;return(0,r.yg)(d,(0,a.A)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Authors"),": ",(0,r.yg)("a",{parentName:"p",href:"/team_members/alfonso.md"},"Alfonso Cevallos")),(0,r.yg)("p",null,(0,r.yg)("img",{src:o(5126).A,width:"2001",height:"1001"})),(0,r.yg)("p",null,"The Polkadot blockchain will implement nominated proof-of-stake (NPoS), a relatively new type of scheme used to select the validators who are allowed to participate in the consensus protocol. In this note we give an intro to NPoS, and a peek inside the research carried out at the Web3 Foundation. We also explain the peculiar way in which validators get elected. So how does NPoS work in Polkadot?"),(0,r.yg)("h2",{id:"validators-and-nominators"},"Validators and nominators"),(0,r.yg)("p",null,"About once per day, the system elects a group of entities called ",(0,r.yg)("strong",{parentName:"p"},"validators"),", who in the next few hours will play a key role in highly sensitive protocols such as ",(0,r.yg)("a",{parentName:"p",href:"/Polkadot/protocols/block-production/"},"block production")," and the ",(0,r.yg)("a",{parentName:"p",href:"/Polkadot/protocols/finality"},"GRANDPA finality gadget"),". Their job is demanding as they need to run costly operations, ensure high communication responsiveness, and build a long-term reputation of reliability. They also must stake their DOTs, Polkadot\u2019s native token, as a guarantee of good behavior, and this stake gets slashed whenever they deviate from their protocol. In contrast, they get paid well when they play by the rules. Any node that is up to the task can publicly offer itself as a validator candidate. However, for operational reasons only a limited number of validators can be elected, expected to be hundreds or thousands."),(0,r.yg)("p",null,"The system also encourages any DOT holder to participate as a ",(0,r.yg)("strong",{parentName:"p"},"nominator"),". A nominator publishes a list of validator candidates that she trusts, and puts down an amount of DOTs at stake to support them with. If some of these candidates are elected as validators, she shares with them the payments, or the sanctions, on a per-staked-DOT basis. Unlike validators, an unlimited number of parties can participate as nominators. As long as a nominator is diligent in her choice and only supports validator candidates with good security practices, her role carries low risk and provides a continuous source of revenue. There are other special roles in the Polkadot network, but we focus only on the relation between these two roles."),(0,r.yg)("p",null,(0,r.yg)("img",{src:o(9358).A,width:"2236",height:"979"})),(0,r.yg)("h2",{id:"the-npos-scheme"},"The NPoS scheme"),(0,r.yg)("p",null,"This nominator-validator arrangement gives strong security guarantees. It allows for the system to select validators with massive amounts of aggregate stake\u200a\u2014\u200amuch higher than any single party\u2019s DOT holdings\u200a\u2014\u200aand eliminate candidates with low stake. In fact, at any given moment we expect there to be a considerable fraction of all the DOTs supply be staked in NPoS. This makes it very difficult for an adversarial entity to get validators elected (as they need to build a fair amount of reputation to get the required backing) and very costly to attack the system (because any attack will result in large amounts of DOTs being slashed)."),(0,r.yg)("p",null,"Our NPoS scheme is much more efficient than proof-of-work (PoW) and faster than standard proof-of-stake (PoS). Networks with deterministic finality must have a limited validator set (the size can be changed with governance). NPoS allows for virtually all DOT holders to continuously participate, thus maintaining high levels of security by putting more value at stake and allowing more people to earn a yield based on their holdings."),(0,r.yg)("h2",{id:"the-election-process"},"The election process"),(0,r.yg)("p",null,(0,r.yg)("img",{src:o(7189).A,width:"1147",height:"451"})),(0,r.yg)("p",null,"How to elect the validators, given the nominators\u2019 votes? Unlike other PoS-based projects where validators are weighted by stake, Polkadot gives elected validators equal voting power in the consensus protocol. To reflect this fact, the nominators\u2019 stake should be distributed among the elected validators as evenly as possible, while still respecting the nominators\u2019 preferences. At the Web3 Foundation research team, we use tools ranging from election theory to game theory to discrete optimization, to develop an efficient election process that offers fair representation and security, and can be applied in the future to any blockchain using NPoS. We explore these objectives below, together with some examples."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Fair representation.")," In the late 19th century, Swedish mathematician Lars Edvard Phragm\xe9n proposed a method for electing members to his country\u2019s parliament. He noticed that the election methods at the time tended to give all the seats to the most popular political party; in contrast, his new method ensured that the number of seats assigned to each party were proportional to the votes given to them, so it gave more representation to minorities. The property achieved by his method is formally known as proportional justified representation, and is very fitting for the NPoS election because it ensures that any pool of nodes is neither over-represented nor under-represented by the elected validators, proportional to their stake. Our heuristics build on top of Phragm\xe9n\u2019s suggested method and ensure this property in every election."),(0,r.yg)("p",null,(0,r.yg)("img",{src:o(4924).A,width:"1147",height:"961"})),(0,r.yg)("p",null,"The illustration represents a typical input to the election process, with nominators on the left having different amounts of stake, and connected by lines to those validator candidates on the right that they trust (for simplicity, validators have no stake of their own in this example, though they will in a real scenario). Suppose we need to elect k = 4 validators. The fair representation property roughly translates to the rule that any nominator holding at least one k-th of the total stake is guaranteed to have at least one of their trusted validators elected. As the total stake is 40 DOTS and a fourth of it is 10 DOTS, the first two nominators are guaranteed to be represented by a validator. In the image below we see three possible election results: one that violates the fair representation property and two that achieve it."),(0,r.yg)("p",null,(0,r.yg)("img",{src:o(2323).A,width:"2236",height:"1051"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Security.")," If a nominator gets two or more of its trusted validators elected, we need to distribute her stake among them, in such a way that the validators\u2019 backings are as balanced as possible. Recall that we want to make it as difficult as possible for an adversarial pool to get a validator elected, and they can achieve this only if they get a high enough backing. Therefore, we equate the level of security of an election result to ",(0,r.yg)("em",{parentName:"p"},"the minimum amount of backing of any elected validator"),". For the last two election results with fair representation, we provide stake distributions which show that they achieve security levels of 6 and 9 respectively."),(0,r.yg)("p",null,(0,r.yg)("img",{src:o(6762).A,width:"2236",height:"1051"})),(0,r.yg)("p",null,"The election result on the right achieves a higher security level, and clearly does a better job at splitting the nominators\u2019 stake into validators\u2019 backings of roughly equal size. The goal of the NPoS election process is thus to provide a result that achieves fair representation and a security level that is as high as possible. This gives rise to a rather challenging optimization problem (it is ",(0,r.yg)("a",{parentName:"p",href:"https://www.britannica.com/science/NP-complete-problem"},"NP-complete"),"), for which we have developed fast approximate heuristics with strong guarantees on security and scalability."),(0,r.yg)("p",null,"We are excited about the technical developments brought forward by Polkadot, and the possibilities enabled by NPoS and other highly efficient schemes being developed in the blockchain space. To learn more about Nominated Proof-of-Stake, visit our ",(0,r.yg)("a",{parentName:"p",href:"https://wiki.polkadot.network/docs/en/learn-staking"},"Wiki pages"),", and read our ",(0,r.yg)("a",{parentName:"p",href:"/Polkadot/protocols/NPoS/Paper"},"research paper"),"."))}p.isMDXComponent=!0},9358:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/NPoS_1-47681d3fe43b9d0054a9cdb039dc9d60.png"},7189:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/NPoS_2-94cfa8d13f0bfc4e81b0830796e04ddf.png"},4924:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/NPoS_3-97b494aa7fad448dd8f13615d2f453e3.png"},2323:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/NPoS_4-46b58c6f92cb85eebffae27bbeccfe32.png"},6762:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/NPoS_5-54eb01f4e86faa7b2a610bb7a1e4095c.png"},5126:(e,t,o)=>{o.d(t,{A:()=>a});const a=o.p+"assets/images/NPoS_Cover-12f2413855d8a4b414646382942ec7f6.png"}}]);